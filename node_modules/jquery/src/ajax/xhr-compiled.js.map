{"version":3,"sources":["xhr.js"],"names":[],"mappings":"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","file":"xhr-compiled.js","sourcesContent":["define( [\n\t\"../core\",\n\t\"../var/support\",\n\t\"../ajax\"\n], function( jQuery, support ) {\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n};\n\nvar xhrSuccessStatus = {\n\n\t\t// File protocol always yields status code 0, assume 200\n\t\t0: 200,\n\n\t\t// Support: IE9\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport( function( options ) {\n\tvar callback, errorCallback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\txhr.open(\n\t\t\t\t\toptions.type,\n\t\t\t\t\toptions.url,\n\t\t\t\t\toptions.async,\n\t\t\t\t\toptions.username,\n\t\t\t\t\toptions.password\n\t\t\t\t);\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.onreadystatechange = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\n\t\t\t\t\t\t\t\t// Support: IE9\n\t\t\t\t\t\t\t\t// On a manual native abort, IE9 throws\n\t\t\t\t\t\t\t\t// errors on any property access that is not readyState\n\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\n\t\t\t\t\t\t\t\t\t\t// File: protocol always yields status 0; see #8605, #14207\n\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\n\t\t\t\t\t\t\t\t\t// Support: IE9 only\n\t\t\t\t\t\t\t\t\t// IE9 has no XHR2 but throws on binary (trac-11426)\n\t\t\t\t\t\t\t\t\t// For XHR2 non-text, let the caller handle it (gh-2498)\n\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\terrorCallback = xhr.onerror = callback( \"error\" );\n\n\t\t\t\t// Support: IE9\n\t\t\t\t// Use onreadystatechange to replace onabort\n\t\t\t\t// to handle uncaught aborts\n\t\t\t\tif ( xhr.onabort !== undefined ) {\n\t\t\t\t\txhr.onabort = errorCallback;\n\t\t\t\t} else {\n\t\t\t\t\txhr.onreadystatechange = function() {\n\n\t\t\t\t\t\t// Check readyState before timeout as it changes\n\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t\t// Allow onerror to be called first,\n\t\t\t\t\t\t\t// but that will not handle a native abort\n\t\t\t\t\t\t\t// Also, save errorCallback to a variable\n\t\t\t\t\t\t\t// as xhr.onerror cannot be accessed\n\t\t\t\t\t\t\twindow.setTimeout( function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t// #14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n} );\n"]}