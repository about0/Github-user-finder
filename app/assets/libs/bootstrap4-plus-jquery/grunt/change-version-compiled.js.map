{"version":3,"sources":["change-version.js"],"names":[],"mappings":"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","file":"change-version-compiled.js","sourcesContent":["#!/usr/bin/env node\n'use strict';\n\n/*!\n * Script to update version number references in the project.\n * Copyright 2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n */\nvar fs = require('fs');\nvar path = require('path');\nvar sh = require('shelljs');\nsh.config.fatal = true;\nvar sed = sh.sed;\n\n// Blame TC39... https://github.com/benjamingr/RegExp.escape/issues/37\nRegExp.quote = function (string) {\n  return string.replace(/[-\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n};\nRegExp.quoteReplacement = function (string) {\n  return string.replace(/[$]/g, '$$');\n};\n\nvar DRY_RUN = false;\n\nfunction walkAsync(directory, excludedDirectories, fileCallback, errback) {\n  if (excludedDirectories.has(path.parse(directory).base)) {\n    return;\n  }\n  fs.readdir(directory, function (err, names) {\n    if (err) {\n      errback(err);\n      return;\n    }\n    names.forEach(function (name) {\n      var filepath = path.join(directory, name);\n      fs.lstat(filepath, function (err, stats) {\n        if (err) {\n          process.nextTick(errback, err);\n          return;\n        }\n        if (stats.isSymbolicLink()) {\n          return;\n        }\n        else if (stats.isDirectory()) {\n          process.nextTick(walkAsync, filepath, excludedDirectories, fileCallback, errback);\n        }\n        else if (stats.isFile()) {\n          process.nextTick(fileCallback, filepath);\n        }\n      });\n    });\n  });\n}\n\nfunction replaceRecursively(directory, excludedDirectories, allowedExtensions, original, replacement) {\n  original = new RegExp(RegExp.quote(original), 'g');\n  replacement = RegExp.quoteReplacement(replacement);\n  var updateFile = !DRY_RUN ? (function (filepath) {\n      if (allowedExtensions.has(path.parse(filepath).ext)) {\n        sed('-i', original, replacement, filepath);\n      }\n    }) : (function (filepath) {\n      if (allowedExtensions.has(path.parse(filepath).ext)) {\n        console.log('FILE: ' + filepath);\n      }\n      else {\n        console.log('EXCLUDED:' + filepath);\n      }\n    });\n  walkAsync('.', excludedDirectories, updateFile, function (err) {\n    console.error('ERROR while traversing directory!:')\n    console.error(err);\n    process.exit(1);\n  });\n}\n\nfunction main(args) {\n  if (args.length !== 2) {\n    console.error('USAGE: change-version old_version new_version');\n    console.error('Got arguments:', args);\n    process.exit(1);\n  }\n  var oldVersion = args[0];\n  var newVersion = args[1];\n  var EXCLUDED_DIRS = new Set([\n    '.git',\n    'node_modules',\n    'vendor'\n  ]);\n  var INCLUDED_EXTENSIONS = new Set([\n    // This extension whitelist is how we avoid modifying binary files\n    '',\n    '.css',\n    '.html',\n    '.js',\n    '.json',\n    '.md',\n    '.scss',\n    '.txt',\n    '.yml'\n  ]);\n  replaceRecursively('.', EXCLUDED_DIRS, INCLUDED_EXTENSIONS, oldVersion, newVersion);\n};\n\nmain(process.argv.slice(2));\n"]}